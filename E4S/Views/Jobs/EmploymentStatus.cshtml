@model  IEnumerable<E4S.Models.HumanResource.EmploymentStatus>

@{
  ViewData["Title"] = "Employment Status";
  Layout = "~/Views/Shared/_LayoutHumanResouces.cshtml";
}


<div class="content">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
          <div class="card-header">
              <button class="btn btn-info" data-toggle="modal" data-target="#noticeModal">
                  Add Employment Status
              </button>
              <!-- notice modal -->
              <div class="modal fade" id="noticeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-notice">
                      <div class="modal-content">
                          <div class="modal-header">
                              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                  <i class="now-ui-icons ui-1_simple-remove"></i>
                              </button>
                              <h5 class="modal-title" id="myModalLabel">Enter New Employement Type</h5>
                          </div>
                          <div class="modal-body">
                              <div class="instruction">
                                  <form>
                                      <div class="row">
                                          <div class="col-md-12">
                                              <div class="form-group">
                                                  <label>Employment Status Name</label>
                                                  <input type="text" class="form-control" placeholder="Employment Type" id="EmploymentStatusName" required>
                                              </div>
                                          </div>
                                      </div>

                                      <div class="row">
                                          <div class="col-md-12">
                                              <div class="form-group">
                                                  <label> Description </label>
                                                  <textarea class="form-control" placeholder="Description" id="Description" required rows="3"></textarea>
                                              </div>
                                          </div>
                                      </div>

                                      <div class="card-footer ">
                                          <button type="submit" class="btn btn-fill btn-primary btn-round" id="SubmitNewEmploymentStatus">Submit</button>
                                          <button type="button" class="btn btn-info btn-round" data-dismiss="modal">Close</button>
                                      </div>
                                  </form>
                              </div>
                              @*<p>If you have more questions, don't hesitate to contact us or send us a tweet  creativetim. We're here to help!</p>*@
                          </div>
                      </div>
                  </div>
              </div>
              <!-- end notice modal -->
              <!-- notice Edit modal -->
              <div class="modal fade" id="noticeModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-notice">
                      <div class="modal-content">
                          <div class="modal-header">
                              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                  <i class="now-ui-icons ui-1_simple-remove"></i>
                              </button>
                              <h5 class="modal-title" id="myModalLabel">Edit Employement Type</h5>
                          </div>
                          <div class="modal-body">
                              <div class="instruction">
                                  <form>
                                      <div class="row">
                                          <div class="col-md-12">
                                              <div class="form-group">
                                                  <label>Employment Type</label>
                                                  <input type="text" class="form-control" placeholder="Employment Type" id="eEmploymentStatusName" name="eEmploymentStatusName" required>
                                                  <input type="hidden" class="form-control" placeholder="Employment Type" id="aEditEmployTypeId" name="aEditEmployTypeId" required>
                                              </div>
                                          </div>
                                      </div>

                                      <div class="row">
                                          <div class="col-md-12">
                                              <div class="form-group">
                                                  <label> Description </label>
                                                  <textarea class="form-control" placeholder="Description" id="eDescription" name="eDescription" required rows="3"></textarea>
                                              </div>
                                          </div>
                                      </div>

                                      <div class="card-footer ">
                                          <button type="submit" class="btn btn-fill btn-primary btn-round" id="editEmploymentStatus">Submit</button>
                                          <button type="button" class="btn btn-info btn-round" data-dismiss="modal">Close</button>
                                      </div>
                                  </form>
                              </div>
                              @*<p>If you have more questions, don't hesitate to contact us or send us a tweet  creativetim. We're here to help!</p>*@
                          </div>
                      </div>
                  </div>
              </div>
              <!-- end Edit notice modal -->
              @*<button type="submit" class="btn btn-fill btn-info">Add Employee</button>*@
          </div>

        <div class="card-body">
          <div class="table-responsive" style="overflow:auto">
            <table id="datatable2" class="table table-striped">
              <thead class="text-primary">
              @*<th class="text-center">
                <div class="form-check">
                  <label class="form-check-label">
                    <input class="form-check-input" type="checkbox">
                    <span class="form-check-sign"></span>
                  </label>
                </div>
              </th>*@
              <th class="text-center">
                #
              </th>
              <th>
                Employment Type
              </th>
              <th>
                Description
              </th>

              <th>
                Actions
              </th>
              </thead>
              <tbody>

                @{
                  int i = 1;

                  @if (Model.Count() < 1)
                  {
                  <td></td>
                  <td></td>
                  <td>No Data to Display</td>
                  <td></td>
                  <td></td>

                }


                  @foreach (var item in Model)
                  {

                    <tr>
                      @*<td class="text-center">
                        <div class="form-check">
                          <label class="form-check-label">
                            <input class="form-check-input" type="checkbox">
                            <span class="form-check-sign"></span>
                          </label>
                        </div>
                      </td>*@
                      <td class="text-center">
                        @i
                      </td>

                      <td>
                        @item.EmploymentStatusName
                      </td>
                      <td>
                        @item.Description
                      </td>
                      <td>
                        <span data-toggle="modal" data-target="#noticeModal1"><a href="#" class="btn btn-round btn-warning btn-icon btn-sm" data-toggle="tooltip" data-placement="top" title="Click to Edit" EmploymentTypeId="@item.Id" id="Editbtn" Selected-EmploymentStaus="@item.EmploymentStatusName" Selected-Description="@item.Description"><i class="fa fa-edit"></i></a></span>
                        <a href="#" class="btn btn-round btn-danger btn-icon btn-sm remove" data-toggle="tooltip" data-placement="top" title="Click to Delete" StatusId="@item.Id" EmploymentStatus="@item.EmploymentStatusName"><i class="fas fa-times"></i></a>
                      </td>
                    </tr>

                    { i = i + 1; }
                  }


                  @*@for (int i = 1; i < 10; i++)
        {
          <tr>
            <td class="text-center">
              <div class="form-check">
                <label class="form-check-label">
                  <input class="form-check-input" type="checkbox">
                  <span class="form-check-sign"></span>
                </label>
              </div>
            </td>
            <td class="text-center">
              @i
            </td>

            <td>
              Moleskine Agenda
            </td>
            <td>
              Office
            </td>


            <th>
              <a href="#" class="btn btn-round btn-warning btn-icon btn-sm edit" title="Click To View Details"><i class="far fa-calendar-alt"></i></a>
              <a href="#" class="btn btn-round btn-danger btn-icon btn-sm remove" title="Click to Delete"><i class="fas fa-times"></i></a>
            </th>
          </tr>

        }*@

                }
                @*<tr>
        <td class="text-center">
          2
        </td>
        <td class="text-center">
          <div class="form-check">
            <label class="form-check-label">
              <input class="form-check-input" type="checkbox">
              <span class="form-check-sign"></span>
            </label>
          </div>
        </td>
        <td>
          Stabilo Pen
        </td>
        <td>
          Office
        </td>
        <td class="text-center">
          30
        </td>
        <td class="text-right">
          € 10
        </td>
        <td class="text-right">
          € 300
        </td>
      </tr>
      <tr>
        <td class="text-center">
          3
        </td>
        <td class="text-center">
          <div class="form-check">
            <label class="form-check-label">
              <input class="form-check-input" type="checkbox" checked>
              <span class="form-check-sign"></span>
            </label>
          </div>
        </td>
        <td>
          A4 Paper Pack
        </td>
        <td>
          Office
        </td>
        <td class="text-center">
          50
        </td>
        <td class="text-right">
          € 10.99
        </td>
        <td class="text-right">
          € 109
        </td>
      </tr>
      <tr>
        <td class="text-center">
          4
        </td>
        <td class="text-center">
          <div class="form-check">
            <label class="form-check-label">
              <input class="form-check-input" type="checkbox">
              <span class="form-check-sign"></span>
            </label>
          </div>
        </td>
        <td>
          Apple iPad
        </td>
        <td>
          Meeting
        </td>
        <td class="text-center">
          10
        </td>
        <td class="text-right">
          € 499.00
        </td>
        <td class="text-right">
          € 4,990
        </td>
      </tr>
      <tr>
        <td class="text-center">
          5
        </td>
        <td class="text-center">
          <div class="form-check">
            <label class="form-check-label">
              <input class="form-check-input" type="checkbox" checked>
              <span class="form-check-sign"></span>
            </label>
          </div>
        </td>
        <td>
          Apple iPhone
        </td>
        <td>
          Communication
        </td>
        <td class="text-center">
          10
        </td>
        <td class="text-right">
          € 599.00
        </td>
        <td class="text-right">
          € 5,999
        </td>
      </tr>
      <tr>
        <td colspan="5"></td>
        <td class="td-total">Total</td>
        <td class="td-price">€ 35,999</td>
      </tr>*@
                </tbody>
              </table>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

@section Scripts {

  <script>
    $(document).ready(function () {

      $('#datatable2').DataTable({
        "pagingType": "full_numbers",
        dom: "Bfrtip",
        "lengthMenu": [
          [10, 25, 50, -1],
          [10, 25, 50, "All"]
        ],


        buttons: [
          'copy',
          'excel',
          'csv',
          'pdf',
          'print',
        ],


        responsive: true,
        language: {
          search: "_INPUT_",
          searchPlaceholder: "Search records",
        }

      });

      var table = $('#datatable2').DataTable();

      // Delete a record
      table.on('click', '.remove', function (e) {
        $tr = $(this).closest('tr');

        statusId = $(this).attr('StatusId');
        employmentStatus = $(this).attr('EmploymentStatus');
        


        swal({
          title: 'Are you sure?',
          text: "You are about to delete '" + employmentStatus + "'",
          type: 'warning',
          showCancelButton: true,
          confirmButtonClass: 'btn btn-success',
          cancelButtonClass: 'btn btn-danger',
          confirmButtonText: 'Yes, delete it!',
          buttonsStyling: false
        }).then(function () {

          $.ajax({
            type: "POST",
            url: "/Jobs/deleteEmploymentStatus",
            data: JSON.stringify(statusId),
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            headers: {
              RequestVerificationToken:
                $('input:hidden[name="__RequestVerificationToken"]').val()
            },
            success: function (r) {

              if (r.msg == "Success") {

                swal({
                  title: 'Deleted!',
                  text: 'Your file has been deleted.',
                  type: 'success',
                  confirmButtonClass: "btn btn-success",
                  buttonsStyling: false
                });


              } else if (r.msg == "Fail") {

                alert(r.msg);

              } else if (r.msg == "No Data") {
                alert(r.msg);

              } else {
                alert(r.msg);
              }
              //alert(r.msg);
              // window.location.reload();

            },
            error: function () {
              alert(r.msg);
            }
          });


          table.row($tr).remove().draw();

        }).catch(swal.noop);


        e.preventDefault();
      });

      //Like record
      table.on('click', '.like', function () {
        alert('You clicked on Like button');
      });
    });
  </script>

  <script type="text/javascript">

    $(document).ready(function () {

      $("#SubmitNewEmploymentStatus").click(function (event) {

        event.preventDefault();

        var EmploymentStatus = {
          EmploymentStatusName: $("#EmploymentStatusName").val(),
          Description: $("#Description").val(),
        };


        // console.log(Items);
        console.log(EmploymentStatus);

        $.ajax({
          type: "POST",
          url: "/Jobs/PostNewEmploymentStatus",
          data: JSON.stringify(EmploymentStatus),
          dataType: "json",
          contentType: 'application/json; charset=utf-8',
          headers: {
            RequestVerificationToken:
              $('input:hidden[name="__RequestVerificationToken"]').val()
          },
          success: function (r) {

            if (r.msg == "Success") {

              demo.showSwal('success-message');

            } else if (r.msg == "Fail") {

              alert(r.msg);

            } else if (r.msg == "No Data") {
              alert(r.msg);

            } else {
              alert(r.msg);
            }
            //alert(r.msg);
            // window.location.reload();

          },
          error: function () {
            alert(r.msg);
          }
        });
      });
    });


      //Code for pulling the Records on the Table  
        var aEditEmployTypeId;

         $(document).delegate('#Editbtn',
        'click',
        function (e) {

            aEditEmployTypeId = $(this).attr('EmploymentTypeId');
            employmentStatusName = $(this).attr('Selected-EmploymentStaus');
            description = $(this).attr('Selected-Description');
            
            //console.log(description, department);

            $('input[name=aEditEmployTypeId]').val(aEditEmployTypeId);
            $('input[name=eEmploymentStatusName]').val(employmentStatusName);
            $('textarea[name=eDescription]').val(description);
            
        });

      
        // Edit your post 

         $(document).ready(function () {

            $("#editEmploymentStatus").click(function (event) {

                event.preventDefault();

                var PostEmploymentStatus = { 
                    AId: $("#aEditEmployTypeId").val(),
                    EmploymentStatusName: $("#eEmploymentStatusName").val(),
                    Description : $("#eDescription").val(),
                };


                // console.log(Items);
                console.log(PostEmploymentStatus);

                $.ajax({
                  type: "POST",
                  url: "/Jobs/editEmploymentStatus",
                  data: JSON.stringify(PostEmploymentStatus),
                  dataType: "json",
                  contentType: 'application/json; charset=utf-8',
                  headers: {
                      RequestVerificationToken:
                      $('input:hidden[name="__RequestVerificationToken"]').val()
                  },
                  success: function (r) {

                    if (r.msg == "Success") {

                      demo.showSwal('success-message');

                    } else if (r.msg == "Fail") {

                      alert(r.msg);

                    } else if (r.msg == "No Data") {
                      alert(r.msg);

                    } else {
                      alert(r.msg);
                    }
                    //alert(r.msg);
                    // window.location.reload();

                  },
                  error: function () {
                    alert(r.msg);
                  }
                });
              });
          });

  </script>

}
